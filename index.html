<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ùÑÔ∏è Penguin 3D Adventure - Full Multiplayer!</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&family=Inter:wght@400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Three.js Import Map -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
            }
        }
    </script>
</head>

<body>
    <!-- Login/Signup Screen -->
    <div class="auth-screen" id="loginScreen">
        <div class="auth-card">
            <h1 class="auth-title">‚ùÑÔ∏è Penguin 3D</h1>

            <div class="auth-tabs">
                <button class="auth-tab active" id="loginTabBtn" onclick="showLoginTab('login')">Login</button>
                <button class="auth-tab" id="signupTabBtn" onclick="showLoginTab('signup')">Sign Up</button>
            </div>

            <!-- Device Selection -->
            <div class="option-group" style="margin-bottom: 25px;">
                <label>Playing On:</label>
                <div class="radio-buttons">
                    <label class="radio-btn"><input type="radio" name="device" value="pc" checked> <span>üíª
                            Computer</span></label>
                    <label class="radio-btn"><input type="radio" name="device" value="mobile"> <span>üì±
                            Mobile</span></label>
                </div>
            </div>

            <!-- Login Form -->
            <div class="auth-form active" id="loginForm">
                <div class="input-group">
                    <label>Username</label>
                    <input type="text" id="loginUsername" placeholder="Enter username">
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button class="action-btn primary full-width" onclick="handleLogin()">Waddle In</button>
            </div>

            <!-- Signup Form -->
            <div class="auth-form" id="signupForm">
                <div class="signup-grid">
                    <div class="signup-inputs">
                        <div class="input-group">
                            <label>Explorer Name</label>
                            <input type="text" id="signupUsername" placeholder="e.g. Frosty">
                        </div>
                        <div class="input-group">
                            <label>Password</label>
                            <input type="password" id="signupPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        </div>
                        <div class="character-selectors">
                            <div class="option-group">
                                <label>Gender</label>
                                <div class="radio-buttons">
                                    <label class="radio-btn"><input type="radio" name="gender" value="boy" checked
                                            onchange="updateCharacterPreview()"> <span>üë¶ Boy</span></label>
                                    <label class="radio-btn"><input type="radio" name="gender" value="girl"
                                            onchange="updateCharacterPreview()"> <span>üëß Girl</span></label>
                                </div>
                            </div>
                            <div class="option-group">
                                <label>Character Style</label>
                                <select id="characterStyle" onchange="updateCharacterPreview()">
                                    <option value="explorer">Classic Explorer</option>
                                    <option value="kitty">Hello Kitty Pack</option>
                                    <option value="ninja">Arctic Ninja</option>
                                    <option value="hero">Snow Hero</option>
                                    <option value="princess">Ice Princess</option>
                                    <option value="space">Space Cadet</option>
                                    <option value="pusheen">Pusheen Cat</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="signup-preview">
                        <div class="preview-box">
                            <p>Character Preview</p>
                            <div id="characterPreviewContainer">
                                <!-- 3D Preview Canvas will be injected here -->
                            </div>
                        </div>
                    </div>
                </div>
                <button class="action-btn primary full-width" onclick="handleSignup()">Create Explorer!</button>
            </div>
        </div>
    </div>

    <!-- Main Game Container -->
    <div class="game-container hidden" id="gameContainer">
        <!-- HUD Overlay -->
        <div class="game-hud">
            <div class="hud-top">
                <div class="resource-bar">
                    <div class="resource-item">
                        <span class="resource-icon">‚ùÑÔ∏è</span>
                        <span class="resource-value" id="snowCount">0</span>
                    </div>
                    <div class="resource-item">
                        <span class="resource-icon">üêß</span>
                        <span class="resource-value" id="multiplierText">1.0x</span>
                    </div>
                </div>
                <div class="hud-right">
                    <button class="hud-btn" onclick="showPetBag()">üéí Swarm</button>
                    <button class="hud-btn" onclick="showShop()">üè™ Store</button>
                    <button class="hud-btn" onclick="showAccount()">üë§ Style</button>
                    <button class="hud-btn" onclick="showCodes()">üè∑Ô∏è Codes</button>
                    <button class="hud-btn" onclick="toggleMap()">üó∫Ô∏è Travel</button>
                    <button class="hud-btn" onclick="showSettings()">‚öôÔ∏è</button>
                </div>
            </div>

            <div class="area-indicator">
                <span id="currentAreaName">Glacier Bay</span>
            </div>

            <!-- Chat Panel -->
            <div class="chat-panel" id="chatPanel">
                <div class="chat-output" id="chatMessages"></div>
                <div class="chat-input-area">
                    <input type="text" id="chatInput" placeholder="Press Enter to chat..." autocomplete="off">
                    <button onclick="sendChatMessage()">Send</button>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <div class="modal-overlay hidden" id="petBagOverlay">
            <div class="modal large">
                <div class="modal-header">
                    <h2>üéí My Penguin Swarm</h2>
                    <button class="close-btn" onclick="hidePetBag()">‚úï</button>
                </div>
                <div class="modal-controls">
                    <button class="action-btn secondary" onclick="equipBest()">‚ú® Select Best Swarm</button>
                </div>
                <div class="pet-grid" id="petBagGrid"></div>
            </div>
        </div>

        <div class="modal-overlay hidden" id="shopOverlay">
            <div class="modal large">
                <div class="modal-header">
                    <h2>üè™ Arctic Store</h2>
                    <button class="close-btn" onclick="hideShop()">‚úï</button>
                </div>
                <div class="shop-grid">
                    <div class="shop-card">
                        <div class="shop-icon">ü•ö</div>
                        <h3>Common Egg</h3>
                        <p>Hatch Common or Rare penguins.</p>
                        <button class="action-btn primary" onclick="buyEgg('common')">100 ‚ùÑÔ∏è</button>
                    </div>
                    <div class="shop-card">
                        <div class="shop-icon">‚ú®</div>
                        <h3>Rare Egg</h3>
                        <p>Higher chance for Epic penguins!</p>
                        <button class="action-btn primary" onclick="buyEgg('rare')">500 ‚ùÑÔ∏è</button>
                    </div>
                    <div class="shop-card">
                        <div class="shop-icon">üëë</div>
                        <h3>Legendary Egg</h3>
                        <p>Guaranteed Epic or Legendary!</p>
                        <button class="action-btn primary" onclick="buyEgg('legendary')">2500 ‚ùÑÔ∏è</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-overlay hidden" id="mapOverlay">
            <div class="modal large">
                <div class="modal-header">
                    <h2>üó∫Ô∏è Travel Map</h2>
                    <button class="close-btn" onclick="toggleMap()">‚úï</button>
                </div>
                <div class="map-grid" id="mapContent"></div>
            </div>
        </div>

        <div class="modal-overlay hidden" id="settingsOverlay">
            <div class="modal">
                <div class="modal-header">
                    <h2>‚öôÔ∏è Settings</h2>
                    <button class="close-btn" onclick="hideSettings()">‚úï</button>
                </div>
                <div class="settings-list">
                    <button class="action-btn danger" onclick="saveAndLogout()">Save & Logout</button>
                </div>
            </div>
        </div>

        <div class="modal-overlay hidden" id="codesOverlay">
            <div class="modal">
                <div class="modal-header">
                    <h2>üè∑Ô∏è Redeem Codes</h2>
                    <button class="close-btn" onclick="hideCodes()">‚úï</button>
                </div>
                <div class="codes-content" style="padding: 20px; text-align: center;">
                    <p style="margin-bottom: 20px; color: #636e72;">Enter a secret code to unlock cool rewards!</p>
                    <div class="input-group">
                        <input type="text" id="codeInput" placeholder="ENTER CODE HERE..."
                            style="text-align: center; text-transform: uppercase;">
                    </div>
                    <button class="action-btn primary full-width" onclick="redeemCode()"
                        style="margin-top: 15px;">Redeem Code</button>
                </div>
            </div>
        </div>

        <div class="modal-overlay hidden" id="accountOverlay">
            <div class="modal">
                <div class="modal-header">
                    <h2>üë§ Change Style</h2>
                    <button class="close-btn" onclick="hideAccount()">‚úï</button>
                </div>
                <div class="account-content" style="padding: 10px;">
                    <div class="option-group" style="margin-bottom: 20px;">
                        <label>Gender</label>
                        <div class="radio-buttons">
                            <label class="radio-btn"><input type="radio" name="accGender" value="boy" id="accGenderBoy">
                                <span>üë¶ Boy</span></label>
                            <label class="radio-btn"><input type="radio" name="accGender" value="girl"
                                    id="accGenderGirl"> <span>üëß Girl</span></label>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>Character Style</label>
                        <select id="accStyle">
                            <option value="explorer">Classic Explorer</option>
                            <option value="kitty">Hello Kitty Pack</option>
                            <option value="ninja">Arctic Ninja</option>
                            <option value="hero">Snow Hero</option>
                            <option value="princess">Ice Princess</option>
                            <option value="space">Space Cadet</option>
                            <option value="pusheen">Pusheen Cat</option>
                        </select>
                    </div>
                    <button class="action-btn primary full-width" onclick="saveAppearance()">Update Appearance</button>
                </div>
            </div>
        </div>

        <!-- Mobile Controls -->
        <div id="mobileControls" class="hidden">
            <div id="joystickZone"></div>
            <button id="mobileCollectBtn" class="mobile-action-btn">‚ùÑÔ∏è COLLECT</button>
        </div>

        <!-- Canvas Container -->
        <div id="threejs-container"></div>

        <!-- Collection Feedback -->
        <div class="collection-feedback hidden" id="collectionPopup">
            <span id="popupIcon">‚ùÑÔ∏è</span>
            <span id="popupText">+10</span>
        </div>
    </div>

    <script type="module" src="game.js"></script>
</body>

</html>